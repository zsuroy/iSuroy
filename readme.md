<!--suppress HtmlDeprecatedAttribute -->

<div align="center">
  <p>
      <img alt="logo" src="https://raw.githubusercontent.com/zsuroy/iSuroy/master/logo.png"/>
  </p>

  <h1>STM32 é¡¹ç›®é©±åŠ¨åº”ç”¨åº“</h1>
  <p> åŸºäº STM32F103C8T6 çš„ HAL åº“åº”ç”¨å®è·µæ¨¡ç‰ˆ  </p>
  <p>å¼€å‘ç¯å¢ƒ: Vscode + Embeded IDE + GCC + Cortex-debug (MacOS)  </p>
  <p>ä½œè€…: Suroy (https://suroy.cn) </p>

  <p>
    <a href="https://suroy.cn"><img alt="SUROY(BLOG)" src="https://img.shields.io/website?down_message=FLOWER&label=SUROY&up_color=ff69b4&up_message=DREAM&logo=micro:bit&url=https%3A%2F%2Fsuroy.cn"></a>
    <a href="https://github.com/zsuroy"><img alt="Suroy" src="https://img.shields.io/github/languages/top/zsuroy/iSuroy?style=flat-square"/></a>
    <a href="https://github.com/zsuroy"><img alt="Suroy" src="https://img.shields.io/github/languages/count/zsuroy/iSuroy?style=flat"/></a>
    <a href="https://github.com/zsuroy"><img alt="GitHub last commit" src="https://img.shields.io/github/last-commit/zsuroy/iSuroy"></a>
    <img alt="GitHub" src="https://img.shields.io/github/license/zsuroy/iSuroy">
  </p>
</div>


 

# ç¯å¢ƒæ­å»º

[åŸºäº VsCode + GCC + STM32 ç¯å¢ƒä¸‹çš„ä¸²å£è¾“å…¥è¾“å‡ºé‡å®šå‘](https://suroy.cn/embeded/serial-port-inputoutput-redirection-based-on-vscode-gcc-stm32-environment.html)


# ç‰ˆæœ¬è¯´æ˜

## V1.0.0

> 2022.1.23 

å·²æœ‰åŠŸèƒ½å¦‚ä¸‹ï¼š

1. æŒ‰é”®é©±åŠ¨
2. LEDé—ªçƒ
3. æ— æºèœ‚é¸£å™¨
4. ç»§ç”µå™¨æ§åˆ¶
5. USART ä¸²å£æ”¶å‘åŠè¾“å…¥è¾“å‡ºé‡å®šå‘
6. ADC + DMA é‡‡æ ·
   + ç›´æ¥ ADC é‡‡æ ·
   + DMA å•é€šé“æ¨¡å¼é‡‡æ · 


## V1.0.1

> ä¼˜åŒ– DMA åŠŸèƒ½  
> 2022.1.23
> 

æ–°å¢åŠŸèƒ½:

1. ADC + DMA åŒé€šé“é‡‡æ ·

   + è°ƒæ•´åŸå› ï¼šADC2 æ— æ³•ä½¿ç”¨ DMA åŠŸèƒ½ï¼Œæ•…å°† ADC2 çš„ IN5(é€šé“äº”) è°ƒæ•´åˆ° ADC1 çš„é€šé“äº”ï¼ŒåŒæ—¶å¯ç”¨ DMA çš„å¾ªç¯æ¥æ”¶åŠŸèƒ½

   + ADC1 å¯ç”¨ IN4ã€IN5 åŒé€šé“è¿›è¡Œ ADC é‡‡æ ·


## V1.0.2

> æ–°å¢ RTC æ—¶é’ŸåŠŸèƒ½  
> 2022.1.24  
> 

é‡‡ç”¨BKPå¯„å­˜å™¨å†™å…¥ä¸Šç”µæ ‡å¿—ä»¥ç¡®ä¿æ‰ç”µä¹‹åæ—¶é—´ä¿ç•™ã€‚
å³å½“æ–­ç”µä¹‹åï¼Œä¸‹æ¬¡ä¸Šç”µèµ°æ—¶æ¥ç»­ä¸Šæ¬¡ç»§ç»­ï¼›
è‹¥å­˜åœ¨å¤‡ç”¨ç”µæºå¯ä»¥ç¡®ä¿æ—¶é—´æ­£å¸¸è¿ä½œã€‚


## V1.0.3

> RTC æ—¶é’ŸåŠŸèƒ½æ–°å¢é…ç½®æ—¶é—´åŠåˆå§‹åŒ–  
> 2022.1.24

æ³¨æ„:

ä½¿ç”¨æ—¶éœ€è¦åŠæ—¶æ¸…ç©ºä¸²å£æ¥æ”¶æ ‡å¿—ï¼ŒåŠæ ‡è®°ä¸²å£æ¥æ”¶ç¼“å­˜åŒºã€‚
è¯¦ç»†è¯·æŸ¥çœ‹ `RTC_Command(uint8_t str[], uint8_t opt)` å‡½æ•°

```c
USART1_RX_STA=0; // ä¸²å£æ¥æ”¶æ ‡å¿—æ¸…0
USART1_RX_BUF[0] = '\0'; //æ ‡è®°æ¸…ç©ºä¸²å£æ¥æ”¶ç¼“å­˜
```

å½“å‰ç‰ˆæœ¬çš„ RTC æ—¶é’Ÿæ–­ç”µå¤ä½åï¼Œé‡æ–°ä¸Šç”µåä»…ä»…ä¼šä¿ç•™æ—¶é—´ï¼Œè€Œæ—¥æœŸä¼šè¢«æ¸…é›¶å¤ä½ï¼Œè‹¥éœ€è¦åˆ›å»ºå®Œå–„ç‰ˆæœ¬çš„ RTC åŠŸèƒ½è§ `[V1.0.4])`


## V1.0.4

> RTC æ—¶é’Ÿèµ°æ—¶ä¼˜åŒ–: æ–­ç”µä¹‹åæ—¥æœŸæ—¶é—´å‡å¯æ­£å¸¸ä¿ç•™  
> 2022.1.25

æ³¨æ„ï¼š æ— å¤‡ç”¨ç”µæ± ï¼Œæœªå¾—åˆ°æœ‰æ•ˆæµ‹è¯•ç»“æœï¼Œå¦‚éœ€ä½¿ç”¨å»ºè®®å…ˆè°ƒè¯•ã€‚

ä½¿ç”¨è¯´æ˜ï¼š

1. ç¦ç”¨ CubeMX è‡ªåŠ¨ç”Ÿæˆ RTC å‡½æ•°åˆå§‹åŒ–  
2. é‡‡ç”¨ä¿®æ”¹çš„ MX_RTC_INIT() å‡½æ•°è¿›è¡Œåˆå§‹åŒ–å¹¶åœ¨ main.c è°ƒç”¨

æˆ–å¯å‚é˜…åˆ†ç¦»å‡ºæ¥çš„ç¨‹åº `iCode/rtc/rtc.c`


## V1.0.5

> æ–°å¢ DHT11 æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨é©±åŠ¨  
> 2022.1.26

è°ƒç”¨è¯´æ˜:


1. åˆå§‹åŒ–è°ƒç”¨ 

```c
HAL_Delay(500); // å»¶æ—¶ç­‰å¾…MCUç¨³å®š
DHT11_Init();
HAL_Delay(1500); // å»¶æ—¶ç­‰å¾…DHT11ç¨³å®š
```

2. è¯»æ•°æ®è°ƒç”¨ 

```c
DHT11_ReadData(DHT11_BUF);
printf("DHT11: %02d%c - %02d 'C\r\n", DHT11_BUF[0], '%' , DHT11_BUF[1]); //02:23:24:024 -> DHT11: 81% - 12 'C
HAL_Delay(1500); // ç­‰å¾…ä¸‹ä¸€æ¬¡
```

âš ï¸ æ³¨æ„ï¼šæ­¤ç‰ˆæœ¬å¿½ç•¥äº† V1.0.4 èµ°æ—¶ä¼˜åŒ–ï¼Œè¿˜åŸ V1.0.3 çš„ RTC åŠŸèƒ½

## V1.0.6

> æ–°å¢ USB_Slave é©±åŠ¨ï¼Œä½œè™šæ‹Ÿä¸²å£é€šè®¯ä½¿ç”¨  
> 2022.1.26

ä½¿ç”¨è¯´æ˜:

1. CubeMX ç”Ÿæˆä»£ç æ—¶éœ€è¦åˆ†é…å †æ ˆç©ºé—´ä»¥é˜²ç¼–è¯‘/è¿è¡Œå‡ºé”™  
   + Minimun XXXX Size: åŸæ¥ -> ç›®æ ‡å¤§å°
   + Minimun Heap Size: 0x200 -> 0x1000
   + Minimun Stack Size: 0x400 -> 0x1000

2. æ·»åŠ é¡¹ç›®èµ„æº
   + `/USB_DEVICE/` USBé©±åŠ¨æ–‡ä»¶å¤¹
   + `/Middlewares/` ä¸­é—´ä»¶é©±åŠ¨æ–‡ä»¶å¤¹
   + PS: **æœ€åæ·»åŠ å¯¹åº”é¡¹ç›®å¤´æ–‡ä»¶åŒ…å«ç›®å½•**

3. ä¿®æ”¹å¯¹åº”åŠŸèƒ½å‡½æ•°
   * `/USB_DEVICE/App/usbd_cdc_if.c` è™šæ‹Ÿä¸²å£é€šè®¯æ–‡ä»¶
      + `CDC_Receive_FS` USBæ¥æ”¶å‡½æ•°
      + `CDC_Transmit_FS` USBå‘é€å‡½æ•°
      + `USB_printf` è‡ªå®šä¹‰å°è£…çš„æ¨¡æ‹Ÿä¸²å£å‘é€å‡½æ•°
   * `/USB_DEVICE/App/usbd_cdc_if.h` è™šæ‹Ÿä¸²å£é€šè®¯å¤´æ–‡ä»¶


âš ï¸ æ³¨æ„äº‹é¡¹ï¼š

åˆå§‹åŒ–æ—¶éœ€è¦: `HAL_CAN_MspDeInit(&hcan); // å…³é—­CANåŠŸèƒ½ï¼Œä½¿USBåŠŸèƒ½å¯ä»¥è¢«ç”µè„‘è¯†åˆ«` 

ç”±äºUSBä¸CANå…±ç”¨ä¸€ä¸ªRAMç©ºé—´ï¼Œä¸èƒ½**åŒæ—¶**ä½¿ç”¨ï¼Œè‹¥éœ€è¦ä½¿ç”¨ CAN æ—¶å¯ä»¥é‡æ–°åˆå§‹åŒ–ã€‚


PS: æ„æ€ä¸€ä¸‹ï¼Œç‰©ç†å¤–æŒ‚é‚£ä¸å°±æ¥äº†ğŸ¶



## V1.0.7

> æ–°å¢èŠ‚èƒ½æ¨¡å¼ï¼šç¡çœ æ¨¡å¼ã€åœæœºæ¨¡å¼ã€å¾…æœºæ¨¡å¼  
> 2022.1.26


ä½¿ç”¨è¯´æ˜:  
> `/iCode/eco/eco.c` æ–‡ä»¶

1. åœ¨ main.h ä¸­å¯¼å‡ºæ—¶é’Ÿå‡½æ•°
```c
extern void SystemClock_Config(void); // å¯¼å‡ºæ—¶é’Ÿå‡½æ•°ä»¥ä¾¿äºèŠ‚èƒ½æ¨¡å¼è°ƒç”¨
```

2. åœæœºæ¨¡å¼ä¸­é…ç½®
   > æ­¤ä¾‹ä¸­ä½¿ç”¨ key2 æŒ‰ä¸‹è§¦å‘å¤–éƒ¨ä¸­æ–­æ¥å”¤é†’

   + éœ€è¦é…ç½®1ä¸ªGPIOä½œä¸ºå¤–éƒ¨è§¦å‘ä¸­æ–­(GPIO_EXTI)ä»¥å”¤é†’: e.g. PA0 -> GPIO_EXTI0
   + å‚æ•°å¦‚ä¸‹: GPIO_Mode -> ä¸‹é™æ²¿è§¦å‘; GPIO_Pull-up ä¸Šæ‹‰
   + NVIC ä¸­å…è®¸ EXTI0

3. å¾…æœºæ¨¡å¼é…ç½®
   > æ­¤ä¾‹ä¸­ä½¿ç”¨ SYS_WKUP è¿›è¡Œè§¦å‘å”¤é†’

   + ä¸ºäº†èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ key2 çš„æŒ‰é”®åŠŸèƒ½ï¼Œä»æ—§ä½¿ç”¨ CubeMX ç”Ÿäº§ PA0 ä½œä¸ºæ™®é€šçš„ GPIO è¾“å…¥
   + å‚æ•°å¦‚ä¸‹: GPIO_Mode -> INPUT; GPIO_Pull-up/Down ä¸Šæ‹‰
   + è€Œå¾…æœºæ¨¡å¼ä¸­é‡‡ç”¨è‡ªå®šä¹‰å‡½æ•°åŠŸèƒ½çš„æ–¹å¼å°†å…¶è®¾ç½®ä¸º SYS_WKUP åŠŸèƒ½
   + ä½¿ç”¨è¯´æ˜
     * é•¿æŒ‰ Key2 æŒ‰é”®å¯åŠ¨å¾…æœºæ¨¡å¼ï¼›æŒ‰RSTé”®ä»å¾…æœºæ¨¡å¼ä¸­å”¤é†’ ğŸ¤¡ 
     * è°ƒè¯•å»ºè®®å°†å¯¹åº”å‡½æ•°ç›´æ¥å¤åˆ¶åˆ° main.c ä¸­æµ‹è¯•
   + å·²çŸ¥é—®é¢˜ï¼š è‹¥ç›´æ¥å°† PA0 é”®è®¾ç½®ä¸º SYS_WKUP æœ‰æ—¶å€™ä¼šå¯¼è‡´ç¼–è¯‘æŠ¥é”™ï¼Œå¯èƒ½æ˜¯ `eco.c` æ–‡ä»¶åˆ°é—®é¢˜



## V1.0.8

> CRC æ ¡éªŒåŠŸèƒ½  
> 2023.1.27

ä½¿ç”¨è¯´æ˜:

1. CubeMX ç”Ÿäº§CRCä»£ç 
   + Computing -> CRC: Activated

2. ç¼–å†™ CRC ç¨‹åº
   + `Core/Src/crc.c` ä¿®æ”¹CRCç¨‹åº
   + `CRCBUF` å³å­˜å‚¨éœ€è¦æ ¡éªŒæ•°æ®ç¼“å†²åŒº

3. èŠ¯ç‰‡IDè¯»å–
   + `void ID_Get(uint8_t show);`


## V1.0.9

> å¤–éƒ¨ä¸­æ–­å®éªŒ  
> 2023.1.27

æŒ‰é”®ä¸­æ–­å®éªŒ: `/iCode/key/key.c`
> ä½¿ç”¨å¤–éƒ¨è§¦å‘ä¸­æ–­ä»¥ç¡®ä¿æŒ‰é”®ä¸å—ä¸»ç¨‹åºä¸­è€—æ—¶å½±å“ï¼Œè¾¾åˆ°å®æ—¶å“åº”æ•ˆæœã€‚  
   + éœ€è¦é…ç½®1ä¸ªGPIOä½œä¸ºå¤–éƒ¨è§¦å‘ä¸­æ–­(GPIO_EXTI): e.g. PA0 -> GPIO_EXTI0
   + å‚æ•°å¦‚ä¸‹: GPIO_Mode -> ä¸‹é™æ²¿è§¦å‘; GPIO_Pull-up ä¸Šæ‹‰   ï¼ˆæŒ‰é”®å¼•è„šåˆå§‹ä¸ºé«˜ç”µå¹³ï¼ŒæŒ‰ä¸‹ä½ç”µå¹³ï¼Œæ­¤æ—¶äº§ç”Ÿä¸€ä¸ªä¸‹é™æ²¿ä¿¡å·ï¼‰
   + NVIC ä¸­å…è®¸ EXTI0
   + ğŸ˜‹Tips: è‹¥å¤šä¸ªGPIOå…±ç”¨ä¸€ä¸ªå¤–éƒ¨ä¸­æ–­ï¼Œå¯ä»¥åœ¨ä¸­æ–­å›è°ƒå‡½æ•°ä¸­åˆ¤æ–­å„GPIOç”µå¹³ä»¥ç¡®å®šå…·ä½“æ˜¯å“ªä¸€ä¸ªäº§ç”Ÿäº†ä¸­æ–­ã€‚
   + ğŸ˜…å¤–éƒ¨ä¸­æ–­å›è°ƒå‡½æ•°ä¸­å‡ä¸èƒ½ä½¿ç”¨ HAL åº“è‡ªå¸¦çš„ `HAL_Delay() // å»¶æ—¶å‡½æ•°`ï¼›å¯ä»¥ä½¿ç”¨è‡ªå†™çš„å»¶æ—¶ `Delay_Us()`
   + è°ƒç”¨é€»è¾‘åˆ†æ:
   + `stm32f1xx_it.c: EXTI0_IRQHandler() -> stm32f1xx_hal_gpio.c: HAL_GPIO_EXTI_IRQHandler() -> HAL_GPIO_EXTI_Callback()`

ğŸ™„å¼‚å¸¸è¯´æ˜ï¼š
> å¼€å¯PA0ç‚¹å¤–éƒ¨ä¸­æ–­(NVIC)ï¼Œç¼–è¯‘å¯èƒ½ä¼šæç¤ºé“¾æ¥æŠ¥é”™ `undefined reference to 'HAL_UART_Transmit'`  
> åŸå› åœ¨äºCubeMXç”Ÿæˆçš„é»˜è®¤ä¸­æ–­ä¼˜å…ˆçº§å‡ä¸º0ä¼šäº§ç”Ÿå†²çª

è§£å†³å¦‚ä¸‹ï¼š NVIC -> è°ƒæ•´ EXTI0 çš„å¤–éƒ¨ä¸­æ–­ä¼˜å…ˆçº§ç¼–å·ä¸º 1



## V1.0.10

> æ–°å¢å®šæ—¶å™¨ã€PWMåŠŸèƒ½  
> 2023.1.27

1. TIMx ä»‹ç»
é€šç”¨ TIMx (TIM2 ã€ TIM3 ã€ TIM4 å’Œ TIM5) å®šæ—¶å™¨åŠŸèƒ½åŒ…æ‹¬ï¼š
â€¢ 16 ä½å‘ä¸Šã€å‘ä¸‹ã€å‘ä¸Š / å‘ä¸‹è‡ªåŠ¨è£…è½½è®¡æ•°å™¨  
â€¢ 16 ä½å¯ç¼–ç¨‹ ( å¯ä»¥å®æ—¶ä¿®æ”¹ ) é¢„åˆ†é¢‘å™¨ï¼Œè®¡æ•°å™¨æ—¶é’Ÿé¢‘ç‡çš„åˆ†é¢‘ç³»æ•°ä¸º 1 ï½ 65536 ä¹‹é—´çš„ä»»æ„æ•°å€¼  
â€¢ 4 ä¸ªç‹¬ç«‹é€šé“ï¼š â”€ è¾“å…¥æ•è· â”€ è¾“å‡ºæ¯”è¾ƒ â”€ PWM ç”Ÿæˆ ( è¾¹ç¼˜æˆ–ä¸­é—´å¯¹é½æ¨¡å¼ ) â”€ å•è„‰å†²æ¨¡å¼è¾“å‡º  
â€¢ ä½¿ç”¨å¤–éƒ¨ä¿¡å·æ§åˆ¶å®šæ—¶å™¨å’Œå®šæ—¶å™¨äº’è¿çš„åŒæ­¥ç”µè·¯  
â€¢ å¦‚ä¸‹äº‹ä»¶å‘ç”Ÿæ—¶äº§ç”Ÿä¸­æ–­ /DMA ï¼š â”€ æ›´æ–°ï¼šè®¡æ•°å™¨å‘ä¸Šæº¢å‡º / å‘ä¸‹æº¢å‡ºï¼Œè®¡æ•°å™¨åˆå§‹åŒ– ( é€šè¿‡è½¯ä»¶æˆ–è€…å†…éƒ¨ / å¤–éƒ¨è§¦å‘ ) â”€ è§¦å‘äº‹ä»¶ ( è®¡æ•°å™¨å¯åŠ¨ã€åœæ­¢ã€åˆå§‹åŒ–æˆ–è€…ç”±å†…éƒ¨ / å¤–éƒ¨è§¦å‘è®¡æ•° ) â”€ è¾“å…¥æ•è· â”€ è¾“å‡ºæ¯”è¾ƒ  
â€¢ æ”¯æŒé’ˆå¯¹å®šä½çš„å¢é‡ ( æ­£äº¤ ) ç¼–ç å™¨å’Œéœå°”ä¼ æ„Ÿå™¨ç”µè·¯  
â€¢ è§¦å‘è¾“å…¥ä½œä¸ºå¤–éƒ¨æ—¶é’Ÿæˆ–è€…æŒ‰å‘¨æœŸçš„ç”µæµç®¡ç†


2. æ™®é€šå®šæ—¶
   > é€šå¸¸é€‰ TIM1 ä¹‹å¤–çš„å®šæ—¶å™¨ä½¿ç”¨ `/Core/Src/tim.c`  
   + å‚æ•°è¯´æ˜
      + Tout  = (ARR+1) * (PCS+1) / Tclk
      + å®šæ—¶æ—¶é—´(us) = (è®¡æ•°å‘¨æœŸ+1) * (åˆ†é¢‘ç³»æ•°+1) / è¾“å…¥æ—¶é’Ÿé¢‘ç‡(MHz)
      + Tclk: CubeMX æ—¶é’Ÿæ ‘ -> APB1 Timer clocks(MHz)
      + APR/PCS: CubeMX å®šæ—¶å™¨çª—å£ä¸­çš„å±æ€§å‚æ•°

   + é…ç½®è¯´æ˜
      > e.g. TIM2 å®šæ—¶ 5s = 5000000us = (7199+1) * (49999+1) / 72
      + CubeMX: Timers -> TIM2 -> Clock Source [Internal Clock] -> Parameter Settingsï¼ˆä¸‹é¢ï¼‰ -> NVIC å…è®¸TIM2ä¸­æ–­ -> è®¾ç½®ä¸­æ–­ä¼˜å…ˆçº§ä¸º2é˜²æ­¢å†²çª
      + Parameter Settings:  
        + åˆ†é¢‘ç³»æ•° PSC [4999]
        + è®¡æ•°æ¨¡å¼ Up
        + è®¡æ•°å‘¨æœŸ Couter Period [7199]
        + è‡ªåŠ¨é‡è½½åˆå€¼ auto-reload preload [enable] 
          > æ— è®ºå…è®¸æˆ–ç¦æ­¢ï¼Œä¸­æ–­å¤„ç†ç¨‹åºå‡ä¼šå®šæ—¶å™¨è‡ªåŠ¨é‡è½½åˆå€¼ï¼›å¼€å¯æ—¶ï¼Œé‡è½½åˆå€¼ä¸ä¼šç«‹é©¬ç”Ÿæ•ˆè€Œæ˜¯åœ¨ä¸‹ä¸€ä¸ªæ›´æ–°äº‹ä»¶å‡ºç°æ—¶ç”±å½±å­å¯„å­˜å™¨ä¼ å…¥ï¼›ç¦æ­¢æ—¶ï¼Œå†™å…¥è‡ªåŠ¨é‡è½½å¯„å­˜å™¨ç«‹é©¬ç”Ÿæ•ˆ  

   + ä»£ç ç¼–å†™
     + åˆå§‹åŒ– `MX_TIM2_Init();`
     + å¼€å¯å®šæ—¶å™¨ä¸­æ–­ `HAL_TIM_Base_Start_IT(&htim2);` å¿…é¡»è¦å…ˆå¼€å¯æ‰èƒ½è¿›å…¥ä¸­æ–­å¤„ç†å›è°ƒå‡½æ•°
     + é‡æ–°ç¼–å†™ä¸­æ–­å›è°ƒå‡½æ•° `HAL_TIM_PeriodElapsedCallback()`
     + ğŸ‘»æ³¨æ„ï¼šTIMä¸­æ–­å¼€å¯åï¼Œè‹¥å›è°ƒå‡½æ•°ä¸­ä¸æ¸…ç©ºä¸­æ–­æ ‡å¿—ä½å¯èƒ½ä¼šå¯¼è‡´ä¸è¿› while(1) ä¸»ç¨‹åº
     + è§£å†³: ä¸­æ–­å›è°ƒå‡½æ•°ä¸­è°ƒç”¨ `__HAL_TIM_CLEAR_FLAG(&htim2, TIM_FLAG_UPDATE); //æ¸…ç©ºå®šæ—¶å™¨ä¸­æ–­æ ‡å¿—ä½`


3. PWMè„‰å®½è°ƒåˆ¶
   > é€šè¿‡æ§åˆ¶å ç©ºæ¯”ä»¥å®ç°å¯¹LEDäº®åº¦ã€æ­¥è¿›ç”µæœºç­‰çš„æ§åˆ¶
   > æ— ç”µè·¯ï¼Œè¯¥PWMæœªç»è¿‡å®é™…æµ‹è¯•
   + é…ç½®è¯´æ˜
     + e.g. é€‰PB0ä½œä¸ºPWMè°ƒå…‰LED
     + CubeMX
       + GPIO -> PB0 -> TIM3_CH3 (å®šæ—¶å™¨3é€šé“3)ï¼›
       + Timer -> TIM3 -> å‹¾é€‰ Internal Clock -> Channel 3 [PWM Generation CH3]
       + Parameter Settings
         + Counter Setting: PSC [71]; CounterMode [Up]; CounterPeriod [499]; auto-reload Preload [enable];
         + PWM Generation Ch3: Mode [PWM mode 1]; Pulse [0]; Output compare preload [è¾“å‡ºå ç©ºæ¯”, enable]; FastMode [disable]; CH Polarity [é€šé“ææ€§, High]
         + Tips: é€šé“ææ€§å³å ç©ºæ¯”ä¸­â€œå â€çš„è¾“å‡º
         + NVIC ä½¿èƒ½ TIM3  
         + GPIO: GPIO mode [äº¤æ›¿æ¨æŒ½, Alternate Function Push Pull]; speed [High]; Label [LED]
   + ä½¿ç”¨è¯´æ˜
      + åˆå§‹åŒ–: `MX_TIM2_Init();//TIM3åˆå§‹åŒ–` ï¼Œ `HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_3); // å¼€å¯å®šæ—¶å™¨PWMè¾“å‡º`
      + å ç©ºæ¯”è®¾ç½®: `__HAL_TIM_SetCompare(&htim3, TIM_CHANNEL_3, PWM_Value); // è®¾ç½®å ç©ºæ¯”å‡½æ•°`
      + è‡ªå†™å‡½æ•°: `uint32_t TIM_PWM_Set(void); //è·å–PWMå€¼`
